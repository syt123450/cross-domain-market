<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width, initial-scale =1.0, maximum-scale = 1.0, user-scalable = no">
    <title>Home</title>

    <link rel='icon' href='img/common/browserLogo.ico' type=‘image/x-ico’>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script src="js/common.js"></script>
    <script src="js/index.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">


</head>
<body>

<header>
    <div class="container">
        <img src="img/common/top_banner.png" alt="webLogo">
    </div>
</header>

<nav>
    <ul class="container">
        <li class="nowPage"><a>Home</a></li>
        <li>
            <a href="#store">Store</a>
            <ul>
                <!--<li><a href="html/store.html">SHOP LI-NING</a></li>-->
            </ul>
        </li>
        <li><a href="#contact">Contact</a></li>
        <li>
            <a href="html/login.html">Log In</a>
            <ul>
                <li>Log Out</li>
            </ul>
        </li>
        <li><a><img id="shoppingCart" src="img/common/pageIcon/shopping_cart.png"></a></li>
    </ul>
</nav>

<div id="advertisement" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#advertisement" data-slide-to="0" class="active"></li>
        <li data-target="#advertisement" data-slide-to="1"></li>
        <li data-target="#advertisement" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="item active">
            <img src="img/home/banner/banner1.jpg" alt="AD1" class="img">
        </div>
        <div class="item">
            <img src="img/home/banner/banner2.jpg" alt="AD2" class="img">
        </div>
        <div class="item">
            <img src="img/home/banner/banner1.jpg" alt="AD1" class="img">
        </div>
    </div>
</div>

<main id="content" class="container">

    <section id="top5" class="itemBar">
        <header>
            <p>TOP 5</p>
            <div>
                <p>Most viewed</p>
                <ul>
                    <li>Most viewed</li>
                    <li>Highest rated</li>
                    <li>Highest price</li>
                    <li>Lowest price</li>
                    <li>Most commented</li>
                </ul>
            </div>
        </header>
        <section>
            <!--<div>-->
                <!--<img src="img/home/top5/1.jpg">-->
                <!--<div>-->
                    <!--<p>$12.33</p>-->
                    <!--<img src="img/common/pageIcon/add_to_cart1.png">-->
                <!--</div>-->
                <!--<p>Tilley LTM3 Airflo Hat</p>-->
                <!--<p>By SHOP PUMA</p>-->
            <!--</div>-->
        </section>
        <div></div>
    </section>

    <section id="recentView" class="itemBar">
        <header>RECENT VIEWED</header>
        <section>
            <!--<div data-commodityID="ID1">-->
                <!--<img src="img/home/top5/1.jpg">-->
                <!--<div>-->
                    <!--<p>$12.33</p>-->
                    <!--<img src="img/common/pageIcon/add_to_cart1.png">-->
                <!--</div>-->
                <!--<p>Tilley LTM3 Airflo Hat</p>-->
                <!--<p>By SHOP PUMA</p>-->
            <!--</div>-->
        </section>
        <div></div>
    </section>

    <section id="store">
        <header>STORES</header>
        <section>
            <!--<div data-storeID="ID1">-->
            <!--<img src="img/home/store/store1.jpg">-->
            <!--<p>SHOP LI-NING</p>-->
            <!--</div>-->
        </section>
        <div></div>
    </section>
</main>

<footer>
    <div id="contact" class="container">
        <header>Contact Us</header>
        <section>
            <div>Contact us</div>
            <div>Terms & Policy</div>
            <div>Partners</div>
            <div>FAQ</div>
            <div>Our story</div>
        </section>
    </div>

    <div id="copyright">copyright © 2017 Icon brands, inc. All rights reserved</div>

</footer>

<!--&lt;!&ndash;<div id="backToTop"><a>Top</a></div>&ndash;&gt;-->

<!--&lt;!&ndash;<div id="smallnav">&ndash;&gt;-->
<!--&lt;!&ndash;<ul>&ndash;&gt;-->
<!--&lt;!&ndash;<li>home</li>&ndash;&gt;-->
<!--&lt;!&ndash;<li></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li></li>&ndash;&gt;-->
<!--&lt;!&ndash;<li></li>&ndash;&gt;-->
<!--&lt;!&ndash;</ul>&ndash;&gt;-->
<!--&lt;!&ndash;</div>&ndash;&gt;-->

</body>

<script>

    $(function () {

        document.cookie="name=syt;hello=world";

        $.ajax({
            url: 'initialize/index',
            type: 'GET',
            async: true,
            dataType: 'json',
            success: function (data) {
                console.log(data);
                renderPage(data);
                bindEvent();
            }
        });
    });

    function renderPage(data) {
        renderNavStoreList(data.storeNameList);
        renderTop5(data.top5Data);
        renderRecentView(data.recentViewData);
        renderStore(data.storeData);
    }

    function renderNavStoreList(storeNameList) {
        var storeListArea = $("nav>ul>li>ul:eq(0)");
        for(var i = 0; i < storeNameList.length; i++) {
            var nameLi = document.createElement("li");
            $(nameLi).attr("data-storeID", storeNameList[i].storeID);
            var nameA = document.createElement("a");
            $(nameA).attr("href", "html/store.html").text(storeNameList[i].storeName);
            $(nameLi).append(nameA);
            $(storeListArea).append(nameLi);
        }
    }

    function renderTop5(top5Data) {
        var top5Area = $("#top5>section");
        for (var i = 0; i < top5Data.length; i++) {
//            console.log(top5Data[i]);
            var commodityObject = document.createElement("div");
            $(commodityObject).attr("data-commodityID", top5Data[i].commodityID);
            var commodityPic = document.createElement("img");
            $(commodityPic).attr("src", top5Data[i].commodityPicUrl);
            var commodityPricePlace = document.createElement("div");
            var commodityPrice = document.createElement("p");
            $(commodityPrice).text(top5Data[i].commodityPrice);
            var addButton = document.createElement("img");
            $(addButton).attr("src", "img/common/pageIcon/add_to_cart1.png");
            var commodityName = document.createElement("p");
            $(commodityName).text(top5Data[i].commodityName);
            var commodityStore = document.createElement("p");
            $(commodityStore).text(top5Data[i].commodityStore);

            $(commodityPricePlace).append(commodityPrice);
            $(commodityPricePlace).append(addButton);

            $(commodityObject).append(commodityPic);
            $(commodityObject).append(commodityPricePlace);
            $(commodityObject).append(commodityName);
            $(commodityObject).append(commodityStore);

            $(top5Area).append(commodityObject);
        }
    }

    function renderStore(storeData) {
        var storeArea = $("#store>section");
        for (var i = 0; i < storeData.length; i++) {
            var storeObject = document.createElement("div");
            $(storeObject).attr("data-storeID", storeData[i].storeID);
            var storePic = document.createElement("img");
            $(storePic).attr("src", storeData[i].storePicUrl);
            var storeName = document.createElement("p");
            $(storeName).text(storeData[i].storeName);
            storeObject.append(storePic);
            storeObject.append(storeName);
            storeArea.append(storeObject);
        }
    }

    function renderRecentView(recentViewData) {
        var storeArea = $("#recentView>section");
        for (var i = 0; i < recentViewData.length; i++) {
//            console.log(recentViewData[i]);
            var commodityObject = document.createElement("div");
            $(commodityObject).attr("data-commodityID", recentViewData[i].commodityID);
            var commodityPic = document.createElement("img");
            $(commodityPic).attr("src", recentViewData[i].commodityPicUrl);
            var commodityPricePlace = document.createElement("div");
            var commodityPrice = document.createElement("p");
            $(commodityPrice).text(recentViewData[i].commodityPrice);
            var addButton = document.createElement("img");
            $(addButton).attr("src", "img/common/pageIcon/add_to_cart1.png");
            var commodityName = document.createElement("p");
            $(commodityName).text(recentViewData[i].commodityName);
            var commodityStore = document.createElement("p");
            $(commodityStore).text(recentViewData[i].commodityStore);

            $(commodityPricePlace).append(commodityPrice);
            $(commodityPricePlace).append(addButton);

            $(commodityObject).append(commodityPic);
            $(commodityObject).append(commodityPricePlace);
            $(commodityObject).append(commodityName);
            $(commodityObject).append(commodityStore);

            $(storeArea).append(commodityObject);
        }
    }

</script>
</html>